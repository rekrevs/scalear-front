<style>
ul.connected_blocks {
  margin: 0;
}

.connected_blocks li {
  width: 25%;
  height: 2.4em;
  text-align: center;
  line-height: 2em;
  margin: 0;
  display: inline-block;
  color: white;
  position: relative;
  font-size: 14px;
  float: left;
  padding: 3px;
}

.connected_blocks li.active {
  border: 4px solid black;
  padding: 0;
}

.inclass_lecture .panel {
  margin-bottom: 8px;
  cursor: pointer;
  padding: 8px 0;
}

.rotate-90 {
  -webkit-transform: rotate(-90deg);
  -moz-transform: rotate(-90deg);
  -ms-transform: rotate(-90deg);
  -o-transform: rotate(-90deg);
  transform: rotate(-90deg);
}

.panel {
  margin-bottom: 2px
}

.self_quiz .panel.selected {
  background: #B3D0EA;
  border: 2px solid #008CBA;
}

.group_quiz .panel.selected {
  background: #B4EAC8;
  border: 2px solid #43AC6A;
}
.choice{
  cursor: pointer;
}
</style>

<span ng-repeat="(key,alert_message) in alert_messages" ng-show="alert_messages" class="warning alert-box label radius show-for-medium-down show-for-portrait" style="margin:0px">
	 <span ng-show='key=="due"'>
	 	<span translate>events.due_date_passed</span>{{' - '+alert_message[0]+'('+alert_message[1]}} <span >{{ "time."+alert_message[2] | translate}}</span>)
	 	<span translate>time.ago</span>
	 </span>
	 <span ng-show='key=="today"'>
	 	<span translate>events.due</span> <span translate>time.today</span> <span translate>global.at</span> <span>{{alert_message| date:'h:mma'}}</span>
	 </span>
</span>
<span id="lecture_container" style="overflow:hidden">
	<div class="ease_in_out small-centered small-12 portrait-medium-12 large-7 columns width-max-heigh" ng-class="{
	'large-12 land-medium-12 large-centered': !delayed_timeline_open,
	'large-uncentered land-uncentered': delayed_timeline_open,
	'land-medium-12 land-uncentered':ContentNavigator.status && !delayed_timeline_open,
	'land-medium-8':!ContentNavigator.status && delayed_timeline_open
	}">
		<div ng-show="lecture" class="small-12 columns no-padding with-small-padding-top">
			<div id="main-video-container" ng-style="container_style">
				<form name="answer_form" novalidate>
						<span class="no_solve" ng-if="!passed_requirments">
							<center>
								<div style='height:360px' >
									<h2 style="position:relative;top:90px;font-weight:300;font-size:18px" ><span translate>lectures.messages.finish_before_proceeding</span></h2>
								</div>
							</center>
						</span>
						<video_container ng-if="passed_requirments" ng-class="container_class"screenfull active="fullscreen" style="width:100%;height:100%;background:black">
								<youtube class="widescreen" ng-class="video_class" id="lecture_video" url="lecture.url" player="lecture_player" autoplay='0' start="lecture.start_time" end="lecture.end_time" ng-style="video_layer" style="margin: 0 auto;">
									<quiz ng-show="show_progressbar" ng-style="quiz_layer"  resizable-video quiz-layer="quiz_layer" aspect-ratio="lecture.aspect_ratio" video-layer="video_layer" active="fullscreen" resize="resize" max-width='0' style="z-index: 1;">
										<!-- ng-show="quiz_mode || (lecture.url!='none' && !slow && !video_ready) || (slow && !video_ready) || video_end" -->
										<loading class="small-12 columns color-blue" size='big' show="lecture.url!='none' && !slow && !video_ready" style="top: 150px;">
										</loading>
										<div class="slow-message text-center" style='width:100%; height: 100%; background-color: rgba(255,255,255,0.8); position: absolute;' ng-show="slow">
											<h3 style="position:relative;top:70px;font-weight:300;font-size:16px" ><span translate>error_message.slow.server</span><span ng-show="is_youtube"> 'Youtube' </span> <span translate>error_message.slow.is_slow</span></h3>
											<h3 style="position:relative;top:70px;font-weight:300;font-size:16px" ><span translate>error_message.slow.try_reload</span><i class="fi-refresh" style="margin-left: 8px;margin-top: 3px;cursor:pointer" title="reload" ng-click="refreshVideo()"></i></h3>
											<loading size='big' show='true' style="position:relative;top:70px;" />
										</div>
										<div ng-if="selected_quiz.quiz_type == 'html' || selected_quiz.quiz_type == 'html_survey'" >
										 	<student-answer-form submitted="submitted" quiz="selected_quiz" student-answers="studentAnswers" explanation="explanation"/>
										</div>
										<div ng-if="selected_quiz.quiz_type != 'html' && selected_quiz.quiz_type != 'html_survey'">
										 	<student-answer-video ng-repeat="answer in selected_quiz.online_answers" data="answer" quiz="selected_quiz" explanation="explanation" student-answers="studentAnswers"/>
										</div>
										<div ng-show="video_end && !lecture.done && not_done_msg" class="dark-text" style="border: 2px groove rgb(229, 81, 87);padding: 10px;top: 40%;position: relative;text-align: center;background: whitesmoke;z-index: 1;margin:0 10%;font-size:14px;font-weight: 300;">
											<b><span translate>global.note</span>:</b>
											<span translate>lectures.messages.did_not_get_credit</span>
										</div>
										<annotation text="annotation" close="dismissAnnotation" action="toggleVideoPlayback" ng-if="annotation && !selected_quiz "/>
										<annotation text="selected_quiz.question" close="dismissQuestionText" ng-if="selected_quiz.actual_display_text"/>
									</quiz>
								</youtube>
								<progress-bar ng-if="!slow && lecture.url && show_progressbar" seek="progressSeek" player="lecture_player" timeline="timeline['lecture'][lecture.id]" role="2">
									<div ng-show="video_end" style="position: relative;top: -78px;left: 47%;z-index:1000">
										<button id="replay_button" type="button" ng-click="replay()" class="button" style="position: absolute;left: -171px;height:70px;width:180px;" translate>button.replay</button>
								    	<button id="next_button" ng-show='next_item.id' type="button" ng-click="nextItem()" class="button" style="position: absolute;left: 10px;height: 70px;width: 180px;"><span translate>button.next</span></button>
									</div>
									<div ng-show="quiz_mode || distance_peer_session_id" class="right" style="position:relative;right:30%">
										<notification message="notification_message" submessage="notification_submessage" middle-message="notification_middle_message"/>
									</div>
									<div ng-show="quiz_mode" class="right" style="position:relative;right:30%">
										<button type="button"  class="tiny success button no-margin check_answer_button" ng-click="checkAnswer()" >{{check_answer_title | translate}}</button>
									</div>
						    	</progress-bar>
						    	<review_inclass  id="review_inclass" vote="voteForReview()" close="closeReviewNotify()" retry="retryQuiz()" style="display:none;position: absolute;right: 0;"></review_inclass>
								<div ng-show="fullscreen" class="row with-tiny-padding-top with-tiny-padding-bottom black">
									<center>
										<button class="button small no-margin-bottom" ng-click="addNote()" tooltip="{{'lectures.tooltip.click_or_type_note'|translate}}"  translate>lectures.button.new_note</button>
										<button class="button small no-margin-bottom" ng-click="addQuestionBlock()" tooltip="{{'lectures.tooltip.click_or_type_question'|translate}}"  translate>lectures.button.ask_question</button>
										<button class="button small no-margin-bottom" ng-click="addConfused()" tooltip="{{'lectures.tooltip.click_or_type_confused'|translate}}"  translate>lectures.button.im_confused</button>
										<button class="button small no-margin-bottom" ng-click="toggleFullscreen()" tooltip="{{'lectures.tooltip.click_or_type_smallscreen'|translate}}"  translate>lectures.button.exit_fullscreen</button>
									</center>
								</div>
					    </video_container>
				</form>
                <div ng-show="(distance_peer_status == 3 || distance_peer_status == 4)" style="font-size: 60px;color:white;text-shadow: 2px 1px grey, 2px 1px 	grey;margin-top:0.45em;" class="stage_timer">
                    <center>{{status_counter | format}}</center>
                </div>
				<div ng-show="!fullscreen && passed_requirments" class="row no-margin with-tiny-margin-top">
					<center class="small-block-grid-3">
						<button id="add_note_button" class="button small with-tiny-margin-bottom" ng-click="addNote()" tooltip="{{'lectures.tooltip.click_or_type_note'|translate}}" tooltip-append-to-body="true" translate>lectures.button.new_note</button>
						<button id="ask_question_button" class="button small with-tiny-margin-bottom" ng-click="addQuestionBlock()" tooltip="{{'lectures.tooltip.click_or_type_question'|translate}}" tooltip-append-to-body="true" translate>lectures.button.ask_question</button>
						<button id="confused_button" class="button small with-tiny-margin-bottom" ng-click="addConfused()" tooltip="{{'lectures.tooltip.click_or_type_confused'|translate}}" tooltip-append-to-body="true" translate>lectures.button.im_confused</button>
						<button ng-if="!fullscreen" class="button small with-tiny-margin-bottom" ng-click="toggleFullscreen()" tooltip="{{'lectures.tooltip.click_or_type_fullscreen'|translate}}" tooltip-append-to-body="true" translate>lectures.button.fullscreen</button>
						<div ng-hide='distance_peer_session_id'>
							<button class='button small no-margin-bottom' ng-if='lecture.distance_peer'   ng-click='openStudentList(lecture.id,lecture.course_id)' translate>lectures.button.start_distance_peer</button>
						</div>
					</center>
					<center id="preview_inclass_panel" ng-show ='distance_peer_session_id'>
						<div style="border: 1px solid lightgrey;width:96%" class="with-margin-bottom">
							<ul class="connected_circles smaller_connected_circles" style="padding: 5px; margin: 5px 0;">
								<li style="display:none"></li>
						      	<div ng-bind='distance_peer_messages'></div>
						      	<div><span translate>distance_peer.in_distance_peer</span><span>{{email}}</span></div>
								<!-- <button type="button"  class="tiny success button no-margin check_answer_button" ng-click="endDistancePeerSession()" >{{end_session | translate}}</button> -->
								<button type="button"  class="tiny success button no-margin" style="background-color: red;font-size: 14px;" ng-click="endDistancePeerSession()"translate>distance_peer.end_session</button>
						    </ul>
							<div class="small-12 columns no-padding" style="margin-bottom: 10px;">
							  <ul class="connected_blocks">
							    <li ng-class="{'active': distance_peer_status==1}" style="background:lightgrey;color:black;  width: 100%;" ng-show="distance_peer_status==1" translate>distance_peer.video_stage</li>
							    <li ng-class="{'active': distance_peer_status==2}" style="background:lightgrey;color:black" ng-hide="distance_peer_status==1" translate>distance_peer.intro_stage</li>
							    <li ng-class="{'active': distance_peer_status==3}" style="background:#008CBA" ng-hide="distance_peer_status==1" ><span translate>distance_peer.self_stage</span><span ng-if="quiz.question_type== 'MCQ'" >( <span translate>  distance_peer.multiple_choice </span> )</span></li>
							    <li ng-class="{'active': distance_peer_status==4}" style="background:#43AC6A" ng-hide="distance_peer_status==1"><span translate>distance_peer.group_stage</span><span ng-if="quiz.question_type== 'MCQ'" >( <span translate>  distance_peer.multiple_choice </span> )</span></li>
							    <li ng-class="{'active': distance_peer_status>=5}" style="background:darkorange" ng-hide="distance_peer_status==1" translate>distance_peer.end_video_stage</li>
							  </ul>
							</div>

					    </div>
					</center>


<!-- 					<center>
						<div style="display:inline-block" class=" small with-tiny-margin-bottom">
							<div><small>Watched:{{watched_percentage}}%</small></div>
							<div><small>{{ quiz_percentage}} quizzes</small></div>
						</div>
					</center> -->
				</div>
			</div>
		</div>
	</div>

	<student_timeline timeline="timeline['lecture']" items="module_items" current="lecture" seek="seek_and_pause" open="TimelineNavigator.status"/>
</span>
