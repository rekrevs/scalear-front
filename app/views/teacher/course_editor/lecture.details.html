<md-sidenav class="md-sidenav-right" md-component-id="nav_right" md-disable-backdrop md-whiteframe="4" style='height:fit-content;'> 

  <div id='md_video' class="md-accordion" >
    <!-- Video -->
    <md-toolbar ng-init="accordianData[0].expanded = false" ng-click="toggleView(accordianData[0],0)">
      <div class="md-toolbar-tools">

        <div id="video_settings" class="show-inline" style="font-size:1rem !important;" translate>content.types.video</div>
        <div flex=""></div>
        <div ng-class="{expandCollapse:true, active:accordianData[0].expanded}"></div>
      </div>
    </md-toolbar>
    <div style="overflow:scroll" ng-class="{dataContent:true, activeContent:accordianData[0].expanded}">
      <md-content layout-padding style='font-size:12px !important;'>
        <div layout="row">
          <md-input-container flex-gt-xs>
            <md-icon md-svg-src="../images/title_icon.svg" aria-label="url">
            </md-icon>
            <label>
              <span translate>editor.details.title</span>
            </label>
            <input ng-model='lecture.name' ng-blur='updateLecture()'>
          </md-input-container>
        </div>

        <div layout="row" ng-form="frm" name='urlDetails'>
          <md-input-container name='urlDetails' class="md-block" flex-gt-xs>
              <md-icon md-svg-src="../images/insert_link.svg" aria-label="url" style="font-size: x-large;">
              </md-icon>
     
            <label>
              <span translate>editor.details.video</span><span>&#42;</span>
            </label>
            <input name='myUrl' type='url' ng-pattern="/(?:https?:\/{2})?(?:w{3}\.)?(?:youtu|y2u)(?:be)?\.(?:com|be)(?:\/watch\?v=|\/).*(?:v=)?([^\s&]{11})/" ng-model='lecture.url' ng-blur="updateLecture()" />
            <div ng-messages="urlDetails.myUrl.$error" role="alert">
              <div ng-message="pattern">
                 <span translate>editor.details.incompatible_video_link</span>
              </div>
            </div>
          </md-input-container>
          <!-- <md-icon md-svg-src="../images/youtube_icon.svg" aria-label="url" -->
            <!-- style="font-size:large; left:240px; margin-left:12px;"></md-icon> -->
          <!-- <md-icon md-svg-src="../images/vimeo_icon.svg" aria-label="url" style="font-size:large; left:260px;"></md-icon> -->
          <!-- <md-icon md-svg-src="../images/mp4_icon.svg" aria-label="url" style="font-size:large; left:280px;"></md-icon> -->
        </div>
        <center style='margin-top:-45px;'><label>or/</label></center>
        <div layout-gt-sm="row">
          <div class="md-block" flex-gt-sm id='drop_zone' 
            ng-class='{video_input_disabled:transcoding}'
            ngf-drop-disabled='transcoding' 
            ngf-drop='showConsentModal($files)'
            style='border-style: dashed;font-size: 0.875rem'>
            <span>Drag video here to upload.</span>
            </br>
            <md-icon md-svg-src="../images/upload.svg" aria-label="url"></md-icon>
          </div>
        </div>

        <div layout-gt-sm="row" style='margin-top:60px;'>
          
          <md-input-container class="md-block" flex-gt-sm>
              <md-icon md-svg-src="../images/description.svg" aria-label="url" >
              </md-icon>
            <label>
              <span translate>editor.details.description</span>
            </label>
            <input ng-model="lecture.description" ng-blur="updateLecture()" rows="2" md-select-on-focus style='box-shadow: none; '>
          </md-input-container>
        </div>

        <div layout-gt-sm="row">
          <md-input-container class="md-block" flex-gt-sm>
              <md-icon md-svg-src="../images/duration.svg" aria-label="url"></md-icon>
            <label>       
              <span translate>editor.details.duration</span>
            </label>
            <input ng-model='lecture.duration|format' md-select-on-focus disabled></input>
          </md-input-container>
        </div>

        <div layout-gt-sm="row">
          <md-input-container class="md-block" flex-gt-xs>

              <md-icon md-svg-src="../images/lecture_link.svg" aria-label="url"></md-icon>
            <label>
              <span translate>editor.details.student_link_lecture</span>
            </label>
            <input ng-model='link_url' md-select-on-focus disabled></input>
          </md-input-container>
        </div>
      </md-content>
    </div>
  </div>
  <!-- settings -->
  <div id='md_settings' class="md-accordion">
    <md-toolbar ng-init="accordianData[1].expanded = false" ng-click="toggleView(accordianData[1],1)">
        <div class="md-toolbar-tools">
          <div id="lec_settings" style="font-size:1rem !important;" class="show-inline" translate>global.settings</div>
          <div flex=""></div>
          <div ng-class="{expandCollapse:true, active:accordianData[1].expanded}"></div>
        </div>
    </md-toolbar>
    <div style="overflow:scroll" ng-class="{dataContent:true, activeContent:accordianData[1].expanded}">
        <md-content layout-padding  style='font-size:12px !important;'>
          
            <div layout='row'>
              <fieldset class="standard" flex-gt-xs> 
                  <legend><span translate>editor.details.video_type</span></legend>
                  <md-radio-group ng-model="video.type" ng-change="setVideoType();">
                    <md-radio-button id="video" value="0" >
                      <span class="size-12" translate>content.types.video</span>
                    </md-radio-button>
                    <md-radio-button id="inclass_video" value="1" >
                      <span class="size-12" translate>content.types.inclass_video</span>
                    </md-radio-button>
                    <md-radio-button id="distance_peer_video"  value="2">
                      <span class="size-12" translate>content.types.distance_peer_video</span>
                    </md-radio-button>
                  </md-radio-group>
              </fieldset>  
            </div>
            <div layout='row'>  
              <fieldset class="standard" flex-gt-xs> 
                  <legend><span translate>editor.details.in_order</span></legend>
                  <md-radio-group layout='column'>
                      <md-checkbox ng-model="lecture.required_module" ng-change="updateLecture()">               
                         <span translate>editor.details.use_module_in_order</span>       
                      </md-checkbox>    
                      <md-checkbox ng-disabled="lecture.required_module" ng-model="lecture.required" ng-change="updateLecture()">
                          <span class="size-12" translate>editor.details.in_order</span>
                      </md-checkbox>            
                    </md-radio-group>
              </fieldset>  
            </div>
            <div layout='row'>        
              <fieldset class="standard" flex-gt-xs> 
                  <legend> <span translate>editor.details.required</span></legend>
                  <md-radio-group layout='column'>
                      <md-checkbox ng-model="lecture.graded_module" ng-change="updateLecture()">               
                          <span class="size-12" translate>editor.details.use_module_required</span>            
                      </md-checkbox>  
                      <md-checkbox  ng-disabled="lecture.graded_module" ng-model="lecture.graded"  ng-change='updateLecture()'>               
                          <span class="size-12" translate>editor.details.required</span>             
                        </md-checkbox>               
                    </md-radio-group>
              </fieldset>  
            </div>
            <div layout='row'> 
              <fieldset class="standard" flex-gt-xs> 
                  <legend><span translate>editor.details.skip_ahead</span></legend>
                  <md-radio-group >
                      <md-checkbox ng-model="lecture.skip_ahead_module" ng-change="updateLecture()">               
                          <span class="size-12" translate>editor.details.use_module_skip_ahead</span>
                      </md-checkbox>     
                      <md-checkbox ng-disabled="lecture.skip_ahead_module" ng-model="lecture.skip_ahead"  ng-change='updateLecture()'>
                          <span class="size-12" translate>editor.details.skip_ahead_description</span>
                      </md-checkbox>            
                    </md-radio-group>
              </fieldset>  
            </div>  
 
            <div layout='row'>  

                <fieldset class="standard" flex-gt-xs> 
                    <legend><span translate>editor.details.appearance_date</span></legend>
                
                      <md-switch class="md-primary" ng-model="lecture.appearance_time_module" ng-change="updateLecture()" >
                          <span class="size-12" translate>editor.details.use_module</span>
                      </md-switch>        

                      <span ng-hide="!lecture.appearance_time_module">
                          <span tooltip-placement="left" tooltip="{{('editor.tooltip.invisible'|translate) + ' '+ ('editor.tooltip.invisible_cont' | translate) +' '+ (lecture.appearance_time| fromNow) }}" ng-hide="visible(lecture.appearance_time)" class="pull-right" style="width:20px; height:20px;"><img src='images/error.png'/></span>
                        <div style="border-radius: 3px; border: 1px darkgrey solid; background-color: lightgrey; margin-top: 10px; font-size: 12px; color: #555; text-align: center;">
                          {{lecture.appearance_time | amDateFormat:'DD MMM YYYY, HH:mm'}}
                        </div>
                        </span>   
                          

                        <md-input-container  flex-gt-xl ng-hide="lecture.appearance_time_module">
                          <label for="timez" style='padding-left: 40px;'> <span translate>editor.details.set_date</span></label>
                          <input mdc-datetime-picker="" date="true" time="true" type="text" id="datetime" edit-input="true"
                          show-todays-date="" minutes="true" min-date="date" show-icon="true" show-clear='false'
                          ng-model="lecture.appearance_time" class=" dtp-no-msclear dtp-input md-input" ng-blur='validateLecture("appearance_time",lecture.appearance_time);updateLecture();'>
                        </md-input-container>



                   
                      <!-- <div flex-gt-xs ng-hide="lecture.appearance_time_module">
                          <div flex-gt-xs><span translate>editor.details.set_date</span>:</div>
                          <md-datepicker ng-model="ctrl.myDate" md-placeholder="Enter date"></md-datepicker>
                       
                        </div>                  -->
                </fieldset>  
            </div>

            <div layout='row'>  
                <fieldset class="standard" flex-gt-xs> 
                    <legend><span translate>editor.details.due_date</span></legend>
                
                      <md-switch class="md-primary" name="special" ng-model="setting.due_date_enabled" ng-change="updateDueDate();updateLecture()">
                        <span class="size-12" translate>editor.details.has_due_date</span>
                      </md-switch>         
                      <div ng-show="setting.due_date_enabled">
                        <md-switch class="md-primary" name="special" ng-model="lecture.due_date_module" ng-change="updateLecture()" >
                          <span class="size-12" translate>editor.details.use_module_due</span>
                        </md-switch>         
                        
                        <div ng-hide="!lecture.due_date_module">
                          <div style="border-radius: 3px; border: 1px darkgrey solid; background-color: lightgrey; margin-top: 10px; font-size: 12px; color: #555; text-align: center;">
                            {{lecture.due_date | amDateFormat:'DD MMM YYYY, HH:mm'}}
                          </div>
                        </div>

                        <div ng-hide="lecture.due_date_module"flex-gt-xs>
                            <div flex-gt-xs> <span translate>editor.details.set_date</span></div>
                            <md-input-container  flex-gt-xl ng-hide="lecture.appearance_time_module">
                              <label for="timez" style='padding-left: 40px;'> <span translate>editor.details.set_date</span></label>
                              <input mdc-datetime-picker="" date="true" time="true" type="text" id="datetime" edit-input="true"
                              show-todays-date="" minutes="true" min-date="date" show-icon="true" show-clear='false'
                              ng-model="lecture.due_date" ng-blur="validateLecture('due_date','lecture.due_date' );updateLecture()"
                              class=" dtp-no-msclear dtp-input md-input">
                            </md-input-container>
                        </div>   
                      </div>                
                </fieldset>  
            </div>
        </md-content>
    </div>
  </div>
  <!-- Quizzes -->
  <div id='md_quizzes' class="md-accordion">
    <md-toolbar ng-init="accordianData[2].expanded = false" ng-click="toggleView( accordianData[2],2)">
        <div class="md-toolbar-tools">
          <div style="font-size:1rem !important;">
            <div class="show-inline" translate>editor.details.quizzes</div>
          </div>
          <div flex=""></div>
          <div ng-class="{expandCollapse:true, active:accordianData[2].expanded}"></div>
        </div>
    </md-toolbar>
    <div style="overflow:scroll" ng-class="{dataContent:true, activeContent:accordianData[2].expanded}">
      <md-content layout-padding>
        <md-list>
          <md-list-item class="md-3-line" ng-repeat="quiz in lecture.timeline.items|filter:{type:'quiz'}|orderBy:'time'">
            <div class="md-list-item-text" ng-click="showQuiz(quiz.data)">
              <div layout='row' layout-align='space-between center'>
                <h4> <span translate>{{(quiz.data.quiz_type=='survey'? 'editor.survey' : 'editor.quiz')}}</span></h4>
                <h4>{{quiz.data.time|format:'h:mm:ss'}}</h4>
                <delete_button size="small" color='dark' mode="content_navigator" action="deleteQuiz(quiz.data)" padded="true" />
              </div>
              <p ng-bind-html="quiz.data.question"></p>
            </div>
            <!-- <md-icon md-svg-src="../images/delete.svg" aria-label="url"></md-icon> -->
            <md-divider ng-if="!$last"></md-divider>
          </md-list-item>
        </md-list>
      </md-content>
    </div>
  </div>    
  <!-- Notes -->
  <div id='md_notes' class="md-accordion">
      <md-toolbar ng-init="accordianData[3].expanded = false" ng-click="toggleView( accordianData[3],3)">
          <div class="md-toolbar-tools">
            <div style="font-size:1rem !important;">
              <div class="show-inline" translate>editor.details.note</div>
            </div>
            <div flex=""></div>
            <div ng-class="{expandCollapse:true, active:accordianData[3].expanded}"></div>
          </div>
      </md-toolbar>
      <div style="overflow:scroll" ng-class="{dataContent:true, activeContent:accordianData[3].expanded}">
          <md-content  layout-padding>
              <md-list>
                  <md-list-item class="md-3-line" ng-repeat="marker in lecture.timeline.items| filter:{type:'marker'}|orderBy:'time'" >
                    <div class="md-list-item-text" ng-click="showMarker(marker.data)">
                      <div layout='row' layout-align='space-between center'>
                        <h4> <span translate> editor.note </span></h4>
                        <h4>{{marker.data.time|format}}</h4>
                        <delete_button class="right with-small-margin-right" size="small" color='dark' mode="content_navigator" action="deleteMarker(marker.data)" padded="true" />
                      </div>
                      <p ng-bind-html="marker.data.title"></p>
                    </div>
                    <!-- <md-icon md-svg-src="../images/delete.svg" aria-label="url"></md-icon> -->
                    <md-divider ng-if="!$last"></md-divider>
                  </md-list-item>
                </md-list>            
          </md-content>
      </div>
  </div>    
</md-sidenav>    