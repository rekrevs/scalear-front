<div ng-repeat="(key,alert_message) in alert_messages" ng-show="alert_messages" class="alert">
	 <p ng-show='key=="due"'>{{"controller_msg.due_date_passed"|translate}} - {{alert_message[0]}}({{alert_message[1]}} {{ "controller_msg."+alert_message[2]| translate}}) {{"controller_msg.ago" | translate}}</p>
</div>

<div ng-hide="!lecture">
	<center><h3>{{lecture.name}}</h3></center>
	<form name="answer_form" novalidate style="margin:0">
	<video_container ng-style="video_layer" ng-class="lecture.aspect_ratio">
	<overlay ng-show="slow_message || end_buttons" style='opacity:0.96;z-index:1020'>
		<div ng-show='slow_message' style='color:gray'>
			<h3 style="position:relative;top:125px" translate>lectures.server_slow</h3>
			<h3 style="position:relative;top:100px" translate>lectures.try_reload</h3>
			<loading size='small' show='true' style="position:relative;top:100px;" />
		</div>
		<div ng-show="end_buttons">
			<button type="button" ng-click="replay()" class="btn btn-primary" style="position:relative;top:330px;height:70px;width:180px;">Replay</button>
	    	<button ng-show='next_item.id' type="button" ng-click="nextItem()" class="btn btn-primary" style="position:relative;top:330px;height:70px;width:180px;">Next >> </button>
		</div>
	</overlay>
		<div ng-show="display_mode">
			<quiz ng-style="quiz_layer">
				 <div ng-if="selected_quiz.quiz_type == 'html'" ><student-answer-form submitted="submitted" quiz="selected_quiz" student-answers="studentAnswers" explanation="explanation"/></div> 
				 <div ng-if="selected_quiz.quiz_type == 'invideo'"><student-answer-video ng-repeat="answer in selected_quiz.online_answers" data="answer" quiz="selected_quiz" explanation="explanation" student-answers="studentAnswers"/></div>
			</quiz>
		</div>
		<youtube ng-show="lecture.url" id="lecture_video" ng-style="video_layer" url="lecture.url"  player="lecture_player" ng-class="{ipad:ipad}" autoplay='1' class="{{lecture.aspect_ratio}} youtube"/>
		<div ng-if="ipad && !loading_video" id="controls" style="width:800px;height:40px;position:absolute;top:610px;">
			<div class="timer">
				<p style='float:left;margin-left:60px;left:50px;line-height:60px;color:gray'>{{current_time|format}}</p>
				<p style='float:left;margin-left:0px;line-height:60px;color:gray'> / {{total_duration|format}}</p>
			</div>
			<div class="controlDiv" ng-class="play_pause_class" ng-click="playBtn()"></div>
			<div class="progressBar" ng-click="updateProgress($event)">
				<div class="elapsed" ng-style="{width: elapsed_width}"></div>
			</div>
		</div>
		<controls ng-show="lecture.url && !loading_video" resizable-video video-layer='video_layer' quiz-layer='quiz_layer' active="$parent.fullscreen" resize='resize' aspect-ratio='lecture.aspect_ratio' max-width='0' ng-class="{ipad_controls:ipad}"/>
		<check ng-show='display_mode'></check>
		<notification ng-style="notify_position" ng-if='show_notification!=false'></notification>
	</video_container>
	</form>
	<br><br>
	<div style="width:400px;height:200px;overflow:auto;">
		<!--<overlay ng-show="loading_video">-->
		    <!--<loading size="small" show="true" style="position:relative; top:50%;" />-->
		<!--</overlay>-->
		<!--<h4 ng-show="lecture.online_quizzes" translate="questions.questions"></h4>-->



    <!--{{course.groups}}-->
    <accordion close-others="true">
        <accordion-group ng-repeat="l in module_lectures" heading={{l.name}} is-open="l.id == lecture.id" id={{"outline_"+l.id}}>
            <table class="table table-striped">
                <tr ng-repeat="e in timeline['lecture'][l.id].items | filter:checkEmpty">
                    <!--<td>{{e.time}}</td>-->
                    <!--<td>{{e.type}}</td>-->
                    <!--<td></td>-->
                    <!--<td></td>-->
                    <td><p ng-show="(e.type=='quiz' && e.data.is_quiz_solved) || e.type=='confused'" class="solved" ng-click="seek(e.time, l.id)" tooltip-placement="left" tooltip-append-to-body="true" tooltip="Current Lecture: {{ e.time | formattime:'hh:mm:ss'}}">{{(e.time+l.cumulative_duration) | formattime:'hh:mm:ss'}}</p></td>
                    <td ng-show="e.type=='quiz' && !e.data.is_quiz_solved"><p>{{e.data.question}}</p></td>
                    <td ng-show="e.type=='quiz' && e.data.is_quiz_solved"><p class="solved" ng-click="seek(e.time, l.id)" >{{e.data.question}}</p></td>
                    <td ng-show="e.type=='confused' && !e.data.very"><p class="solved" ng-click="seek(e.time, l.id)" translate>{{"courses.confused"}}</p></td>
                    <td ng-show="e.type=='confused' && e.data.very==true"><p class="solved" ng-click="seek(e.time, l.id)" translate>{{"courses.really_confused"}}</p></td>
                    <td style='width:20px;'>
                        <img ng-show="e.type=='quiz' && e.data.is_quiz_solved" src="images/check7.png" />
                        <delete_button ng-show="e.type=='confused'" size="small" action="deleteConfused(e.data.id, l.id, e)" />
                    </td>

                    <!--<td ng-if="quiz.very==false">{{quiz.time}}</td>-->
                </tr>
            </table>
        </accordion-group>
    </accordion>
    </div>

    <discussion></discussion>


</div>
