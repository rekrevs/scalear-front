<span ng-repeat="(key,alert_message) in alert_messages" ng-show="alert_messages" class="warning alert-box label radius show-for-medium-down show-for-portrait" style="margin:0px">
  <span ng-show='key=="due"'>
    <span translate>events.due_date_passed</span>{{' - '+alert_message[0]+'('+alert_message[1]}} <span>{{ "time."+alert_message[2] | translate}}</span>)
    <span translate>time.ago</span>
  </span>
  <span ng-show='key=="today"'>
    <span translate>events.due</span> <span translate>time.today</span> <span translate>global.at</span> <span>{{alert_message| date:'h:mma'}}</span>
  </span>
</span>
<span id="lecture_container" style="overflow:hidden">
  <div class="ease_in_out small-centered small-12 portrait-medium-12 large-7 columns width-max-heigh" ng-class="{
    'large-12 land-medium-12 large-centered': !delayed_timeline_open,
    'large-uncentered land-uncentered': delayed_timeline_open,
    'land-medium-12 land-uncentered':ContentNavigator.status && !delayed_timeline_open,
    'land-medium-8':!ContentNavigator.status && delayed_timeline_open
    }">
    <div ng-show="lecture" class="small-12 columns no-padding with-small-padding-top">
      <div id="main-video-container" ng-style="container_style" >
        <form name="answer_form" novalidate>
          <span class="no_solve" ng-if="!passed_requirments">
            <center>
              <div class="requirement-warning">
                <h2 class="requirement-warning-message">
                  <span translate>lectures.messages.finish_before_proceeding</span>
                </h2>
              </div>
            </center>
          </span>
          <video_container class="video-container" ng-if="passed_requirments" ng-class="container_class" screenfull active="fullscreen">
            <youtube  class="widescreen video-layer" ng-class="video_class" id="lecture_video" url="lecture.url" player="lecture_player" autoplay='0' start="lecture.start_time" end="lecture.end_time" ng-style="video_layer">
              <div ng-if="temp_timeline_item">
                <div class="on-video-textarea" ng-if="temp_timeline_item.type=='note'">
                  <textarea ng-model='temp_timeline_item.data' class="note-textarea" placeholder="Note..."></textarea>
                </div>
                <div class="on-video-block" ng-if="temp_timeline_item.type=='discussion'">
                  <question_block class="disc-textarea" item="temp_timeline_item" />
                </div>
              </div>
              <video-overlay class="video-overlay" ng-show='!quiz_mode && show_progressbar' ng-click='lectureLayerClick()' ng-style="quiz_layer" resizable-video quiz-layer="quiz_layer" aspect-ratio="lecture.aspect_ratio" video-layer="video_layer" active="fullscreen" resize="resize" max-width='0' >
                <loading class="small-12 columns color-blue loading" size='big' show="lecture.url!='none' && !slow && !video_ready" ></loading>
                <div class="slow-message text-center" ng-show="slow">
                  <h3>
                    <span translate>error_message.slow.server</span>
                    <span ng-show="is_youtube"> 'Youtube' </span>
                    <span translate>error_message.slow.is_slow</span>
                  </h3>
                  <h3>
                    <span translate>error_message.slow.try_reload</span>
                    <i class="fi-refresh" title="reload" ng-click="refreshVideo()"></i>
                  </h3>
                  <loading class="loading" size='big' show='true'/>
                </div>
                <div class="dark-text video-no-credit-message" ng-show="video_end && !lecture.done && not_done_msg" >
                  <b><span translate>global.note</span>:</b>
                  <span translate>lectures.messages.did_not_get_credit</span>
                </div>
                <slide-note data="slide_note" close="dismissSlideNote" ng-if="slide_note && slide_note.as_slide && !selected_quiz && !lecture.distance_peer"/>
              </video-overlay>
              <quiz class="video-overlay" ng-show='quiz_mode && show_progressbar' ng-style="quiz_layer" resizable-video quiz-layer="quiz_layer" aspect-ratio="lecture.aspect_ratio" video-layer="video_layer" active="fullscreen" resize="resize" max-width='0'>
                <div ng-if="selected_quiz.quiz_type == 'html' || selected_quiz.quiz_type == 'html_survey'">
                  <student-answer-form submitted="submitted" quiz="selected_quiz" student-answers="studentAnswers" explanation="explanation" />
                </div>
                <div ng-if="selected_quiz.quiz_type != 'html' && selected_quiz.quiz_type != 'html_survey'">
                  <student-answer-video ng-repeat="answer in selected_quiz.online_answers" data="answer" quiz="selected_quiz" explanation="explanation" student-answers="studentAnswers" />
                </div>
              </quiz>
              <dynamic-annotation-student   close="dismissDynamicAnnotation" action="toggleVideoPlayback" data="dynamic_annotation" text-to-show="'annotation'" ng-if="dynamic_annotation && !dynamic_annotation.as_slide &&  !selected_quiz && !lecture.distance_peer" />
              <dynamic-annotation-student close="dismissQuestionText" data="selected_quiz"  text-to-show="'question'" ng-if="selected_quiz.actual_display_text" />
            </youtube>
            <progress-bar class='video-progress-bar' ng-if="!slow && lecture.url && show_progressbar" seek="progressSeek" player="lecture_player" timeline="timeline['lecture'][lecture.id]" role="2">
              <div ng-show="video_end && !distance_peer_session_id" class="video-end-panel">
                <button id="replay_button" class="button end-btn replay-btn" ng-click="replay()"  translate>button.replay</button>
                <button id="next_button" class="button end-btn next-btn" ng-show='next_item.id' ng-click="nextItem()" translate>button.next</button>
              </div>
              <div class="right notification" ng-show="quiz_mode || distance_peer_session_id">
                <notification message="notification_message" submessage="notification_submessage" middle-message="notification_middle_message" />
              </div>
              <div ng-show="quiz_mode" class="right check-answer-btn">
                <button type="button" ng-hide="hide_quiz_button" class="tiny success button no-margin check_answer_button" ng-click="checkAnswer()">{{check_answer_title | translate}}</button>
              </div>
              <div ng-show="slide_note" class="right check-answer-btn">
              	<button type="button" class="tiny success button no-margin check_answer_button" ng-click="dismissSlideNote();toggleVideoPlayback()" translate>button.continue</button>
              </div>
            </progress-bar>
            <review_inclass id="review_inclass" class="review-inclass-panel" vote="voteForReview()" close="closeReviewNotify()" retry="retryQuiz()"></review_inclass>
            <div ng-show="fullscreen" class="row with-tiny-padding-top with-tiny-padding-bottom black">
              <center class="distance-peer-container" ng-show='distance_peer_session_id'>
                <div class="with-margin-bottom distance-peer-panel">
                  <div class="small-12 columns no-padding distance-peer-stages">
                    <ul class="connected_blocks">
                      <li class="distance-peer-video-stage" ng-class="{'active': distance_peer_status==1}" ng-show="distance_peer_status==1" translate>distance_peer.video_stage</li>
                      <li class="distance-peer-intro-stage" ng-class="{'active': distance_peer_status==2}" ng-hide="distance_peer_status==1" translate>distance_peer.intro_stage</li>
                      <li class="distance-peer-self-stage"  ng-class="{'active': distance_peer_status==3}" ng-hide="distance_peer_status==1">
                        <span translate>distance_peer.self_stage</span>
                        <span ng-if="selected_quiz.question_type== 'MCQ'">( <span translate>  distance_peer.multiple_choice </span> )</span>
                      </li>
                      <li class="distance-peer-group-stage" ng-class="{'active': distance_peer_status==4}" ng-hide="distance_peer_status==1">
                        <span translate>distance_peer.group_stage</span>
                        <span ng-if="selected_quiz.question_type== 'MCQ'">( <span translate>  distance_peer.multiple_choice </span> )</span>
                      </li>
                      <li class="distance-peer-end-video-stage" ng-class="{'active': distance_peer_status>=5}" ng-hide="distance_peer_status==1" translate>distance_peer.end_video_stage</li>
                    </ul>
                  </div>
                  <div class="left distance-peer-timer" ng-show="(distance_peer_status == 3 || distance_peer_status == 4)" >
                    <center>{{status_counter | format}}</center>
                  </div>
                  <ul class="distance-peer-info-panel">
                    <div translate translate-values='{name: name}'>distance_peer.in_distance_peer</div>
                    <div class="distance-peer-info-message" ng-bind='distance_peer_message_in_box'></div>
                    <button type="button" class="tiny success button no-margin cancel-btn" ng-click="endDistancePeerSession()" translate>distance_peer.end_peer_instruction</button>
                  </ul>
                </div>
              </center>
              <center>

                <button class="button small no-margin-bottom" ng-click="addNote()" tooltip="{{'lectures.tooltip.click_or_type_note'|translate}}" translate>lectures.button.new_note</button>
                <button class="button small no-margin-bottom" ng-click="addQuestionBlock()" tooltip="{{'lectures.tooltip.click_or_type_question'|translate}}" translate>lectures.button.ask_question</button>
                <button class="button small no-margin-bottom" ng-click="addConfused()" tooltip="{{'lectures.tooltip.click_or_type_confused'|translate}}" translate>lectures.button.im_confused</button>
                <button id="exit_fullscreen_button" class="button small no-margin-bottom" ng-click="toggleFullscreen()" tooltip="{{'lectures.tooltip.click_or_type_smallscreen'|translate}}" translate>lectures.button.exit_fullscreen</button>
              </center>
            </div>
          </video_container>
        </form>
        <div class="distance-peer-timer" ng-show="(distance_peer_status == 3 || distance_peer_status == 4)">
          <center>{{status_counter | format}}</center>
        </div>
        <div ng-show="!fullscreen && passed_requirments && show_progressbar" class="row no-margin with-tiny-margin-top">
          <center class="distance-peer-container" ng-show='distance_peer_session_id'>
            <div class="with-margin-bottom distance-peer-panel">
              <div class="small-12 columns no-padding distance-peer-stages">
                <ul class="connected_blocks">
                  <li class="distance-peer-video-stage" ng-class="{'active': distance_peer_status==1}" ng-show="distance_peer_status==1" translate>distance_peer.video_stage</li>
                  <li class="distance-peer-intro-stage" ng-class="{'active': distance_peer_status==2}" ng-hide="distance_peer_status==1" translate>distance_peer.intro_stage</li>
                  <li class="distance-peer-self-stage"  ng-class="{'active': distance_peer_status==3}" ng-hide="distance_peer_status==1">
                    <span translate>distance_peer.self_stage</span>
                    <span ng-if="selected_quiz.question_type== 'MCQ'">( <span translate>  distance_peer.multiple_choice </span> )</span>
                  </li>
                  <li class="distance-peer-group-stage" ng-class="{'active': distance_peer_status==4}" ng-hide="distance_peer_status==1">
                    <span translate>distance_peer.group_stage</span>
                    <span ng-if="selected_quiz.question_type== 'MCQ'">( <span translate>  distance_peer.multiple_choice </span> )</span>
                  </li>
                  <li class="distance-peer-end-video-stage" ng-class="{'active': distance_peer_status>=5}" ng-hide="distance_peer_status==1" translate>distance_peer.end_video_stage</li>
                </ul>
              </div>
              <ul class="distance-peer-info-panel">
                <div translate translate-values='{name: name}'>distance_peer.in_distance_peer</div>
                <div class="distance-peer-info-message" ng-bind='distance_peer_message_in_box'></div>
                <button type="button" class="tiny success button no-margin cancel-btn" ng-click="endDistancePeerSession()" translate>distance_peer.end_peer_instruction</button>
              </ul>
            </div>
          </center>
          <center class="small-block-grid-3">
            <button id="add_note_button" class="button small with-tiny-margin-bottom" ng-click="addNote()" tooltip="{{'lectures.tooltip.click_or_type_note'|translate}}" tooltip-append-to-body="true" tooltip-placement="top" translate>lectures.button.new_note</button>
            <button id="ask_question_button" class="button small with-tiny-margin-bottom" ng-click="addQuestionBlock()" tooltip="{{'lectures.tooltip.click_or_type_question'|translate}}" tooltip-append-to-body="true" tooltip-placement="top" translate>lectures.button.ask_question</button>
            <button id="confused_button" class="button small with-tiny-margin-bottom" ng-click="addConfused()" tooltip="{{'lectures.tooltip.click_or_type_confused'|translate}}" tooltip-append-to-body="true" tooltip-placement="top" translate>lectures.button.im_confused</button>
            <button id="fullscreen_button" ng-if="!fullscreen" class="button small with-tiny-margin-bottom" ng-click="toggleFullscreen()" tooltip="{{'lectures.tooltip.click_or_type_fullscreen'|translate}}" tooltip-append-to-body="true" tooltip-placement="top" translate>lectures.button.fullscreen</button>
            <div ng-hide='distance_peer_session_id'>
            <button class='button small no-margin-bottom distance-peer-start-btn' ng-if='lecture.distance_peer' ng-click='openStudentList(lecture.id,lecture.course_id)' translate>lectures.button.start_distance_peer</button>
            </div>
          </center>
        </div>
      </div>
    </div>
  </div>
  <student_timeline timeline="timeline['lecture']" items="module_items" current="lecture" seek="seek_and_pause" open="TimelineNavigator.status" />
</span>
